<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: recipe-card-create.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: recipe-card-create.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { changeView } from "./navigate.js";

/**
 * @method newCard
 *  If passed recipe exists in localStorage, creates a new recipe
 *  card with the expanded recipe page bound to it.
 *
 * @param {string} name - name of the recipe
 */
export function newCard(name) {
  if (localStorage.getItem(name)) {
    let recipe = JSON.parse(localStorage.getItem(name));
    let newCard = document.createElement("recipe-card");
    let mainSec = document.getElementById("recipe-cards");
    let summary = recipe.description;
    let summaryTrim = summary.length > 173 ? summary.substring(0, 170) + "..." : summary;
    recipe.description = summaryTrim;
    newCard.data = recipe;
    recipe.description = summary;
    document.querySelector("cook-mode").data = recipe;
    bindRecipeCard(newCard, recipe);
    mainSec.appendChild(newCard);
  }
}

// Listener that triggers when the page is reloaded/refreshed
window.addEventListener("DOMContentLoaded", initCards);

/**
 * @method initCards
 *  When page is reloaded/refreshed, creates a new recipe card
 *  for each recipe in localStorage and binds the expanded
 *  recipe page to it
 */
export function initCards() {
  console.log("initiated cards");
  for (let i = 0; i &lt; localStorage.length; i++) {
    let storedRecipe = JSON.parse(localStorage.getItem(localStorage.key(i)));
    let newCard = document.createElement("recipe-card");
    let mainSec = document.getElementById("recipe-cards");
    let summary = storedRecipe.description;
    let summaryTrim = summary.length > 173 ? summary.substring(0, 170) + "..." : summary;
    storedRecipe.description = summaryTrim;
    storedRecipe.saveFrom = "Create";
    newCard.data = storedRecipe;
    storedRecipe.description = summary;
    bindRecipeCard(newCard, storedRecipe);
    mainSec.appendChild(newCard);
  }
}

/**
 * @method bindRecipeCard
 *  Adds an event listener to each recipe card which, when
 *  clicked, sets the expand recipe page to the recipe card's
 *  data and navigates to said recipe page.
 *
 * @param {HTMLElement} recipeCard
 * @param {object} recipeData
 */
function bindRecipeCard(recipeCard, recipeData) {
  recipeCard.addEventListener("click", (e) => {
    if (document.getElementById("delbut-icon").className === "bi bi-trash" &amp;&amp; recipeCard.shadowRoot.getElementById("favoriteOnCard").classList.contains("mouse-off")) {
      document.querySelector("cook-mode").data = recipeData;
      document.querySelector("recipe-expand").data = recipeData;
      changeView("Recipe Expand");
    }
  });

 
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#addNewIngredientAddslabelandnewinputfieldforingredients">addNewIngredient
 Adds label and new input field for ingredients</a></li><li><a href="global.html#addNewStepAddslabelandnewinputfieldforsteps">addNewStep
 Adds label and new input field for steps</a></li><li><a href="global.html#addNewTagAddsnewinputfortags">addNewTag
 Adds new input for tags</a></li><li><a href="global.html#bindRecipeCardAddsaneventlistenertoeachrecipecardwhich,whenclicked,setstheexpandrecipepagetotherecipecard'sdataandnavigatestosaidrecipepage.">bindRecipeCard
 Adds an event listener to each recipe card which, when
 clicked, sets the expand recipe page to the recipe card's
 data and navigates to said recipe page.</a></li><li><a href="global.html#createRecipeButton">createRecipeButton</a></li><li><a href="global.html#handleImageUploadConvertsimagetodataUrltopreviewit">handleImageUpload
 Converts image to dataUrl to preview it</a></li><li><a href="global.html#imageUpload">imageUpload</a></li><li><a href="global.html#initCardsWhenpageisreloaded/refreshed,createsanewrecipecardforeachrecipeinlocalStorageandbindstheexpandedrecipepagetoit">initCards
 When page is reloaded/refreshed, creates a new recipe card
 for each recipe in localStorage and binds the expanded
 recipe page to it</a></li><li><a href="global.html#navEditCreateseditrecipepagethatcontainsdataforarecipeintheinputs">navEdit
 Creates edit recipe page that contains data for a recipe in the inputs</a></li><li><a href="global.html#newCardIfpassedrecipeexistsinlocalStorage,createsanewrecipecardwiththeexpandedrecipepageboundtoit.">newCard
 If passed recipe exists in localStorage, creates a new recipe
 card with the expanded recipe page bound to it.</a></li><li><a href="global.html#recipeExistsCheckstoseeifarecipeexistsinlocalstoragebycheckingthename">recipeExists
 Checks to see if a recipe exists in local storage
 by checking the name</a></li><li><a href="global.html#refreshRemovesrecipesandshows15otherrandomrecipes">refresh
 Removes recipes and shows 15 other random recipes</a></li><li><a href="global.html#resetClearsinputfieldsaftersaving">reset
 Clears input fields after saving</a></li><li><a href="global.html#saveBaseSavesdataininputfieldstolocalstorageResetstheinputfieldvaluesChangesscreentoexpandedrecipepageofsavedrecipe">saveBase
 Saves data in input fields to local storage
 Resets the input field values
 Changes screen to expanded recipe page of saved recipe</a></li><li><a href="global.html#saveDataCreateChecktomakesureinputfieldsarevalidorifrecipealreadyexistsIfitdoesn'tChangesscreentoexpandedrecipepageofsavedrecipe">saveDataCreate
 Check to make sure input fields are valid or if recipe already exists
 If it doesn't
 Changes screen to expanded recipe page of saved recipe</a></li><li><a href="global.html#saveDataEditSavesediteddataininputfieldstolocalstorageanddeletesoldrecipeResetstheinputfieldvaluesChangesscreentoexpandedrecipepageofsavedrecipe">saveDataEdit
 Saves edited data in input fields to local storage and deletes old recipe
 Resets the input field values
 Changes screen to expanded recipe page of saved recipe</a></li><li><a href="global.html#saveToMyRecipesSavesrecipesfromtheexplorepagetomyrecipesAllowsyoutoedittherecipebeforeyousave">saveToMyRecipes
 Saves recipes from the explore page to my recipes
 Allows you to edit the recipe before you save</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.4</a> on Thu Dec 02 2021 21:15:43 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
